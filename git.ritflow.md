# Соглашение о процессе разработки в репозиториях git

Оглавление:
- [Соглашение о процессе разработки в репозиториях git](#%d0%a1%d0%be%d0%b3%d0%bb%d0%b0%d1%88%d0%b5%d0%bd%d0%b8%d0%b5-%d0%be-%d0%bf%d1%80%d0%be%d1%86%d0%b5%d1%81%d1%81%d0%b5-%d1%80%d0%b0%d0%b7%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%ba%d0%b8-%d0%b2-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d1%8f%d1%85-git)
  - [Описание](#%d0%9e%d0%bf%d0%b8%d1%81%d0%b0%d0%bd%d0%b8%d0%b5)
  - [Этапы разработки (fix, feature)](#%d0%ad%d1%82%d0%b0%d0%bf%d1%8b-%d1%80%d0%b0%d0%b7%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%ba%d0%b8-fix-feature)
    - [1. Формирование перечня задач](#1-%d0%a4%d0%be%d1%80%d0%bc%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d0%b5%d1%80%d0%b5%d1%87%d0%bd%d1%8f-%d0%b7%d0%b0%d0%b4%d0%b0%d1%87)
    - [2. Разработка решения задачи](#2-%d0%a0%d0%b0%d0%b7%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%ba%d0%b0-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b7%d0%b0%d0%b4%d0%b0%d1%87%d0%b8)
    - [3. Review решения задачи](#3-review-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b7%d0%b0%d0%b4%d0%b0%d1%87%d0%b8)
    - [4. Слияние решений задачи](#4-%d0%a1%d0%bb%d0%b8%d1%8f%d0%bd%d0%b8%d0%b5-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d0%b9-%d0%b7%d0%b0%d0%b4%d0%b0%d1%87%d0%b8)
    - [5. Deploy тестового стенда](#5-deploy-%d1%82%d0%b5%d1%81%d1%82%d0%be%d0%b2%d0%be%d0%b3%d0%be-%d1%81%d1%82%d0%b5%d0%bd%d0%b4%d0%b0)
    - [6. Заморозка](#6-%d0%97%d0%b0%d0%bc%d0%be%d1%80%d0%be%d0%b7%d0%ba%d0%b0)
    - [7. Тестирование](#7-%d0%a2%d0%b5%d1%81%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5)
    - [8. Исправлени недочётов](#8-%d0%98%d1%81%d0%bf%d1%80%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8-%d0%bd%d0%b5%d0%b4%d0%be%d1%87%d1%91%d1%82%d0%be%d0%b2)
    - [9. Релиз](#9-%d0%a0%d0%b5%d0%bb%d0%b8%d0%b7)
  - [Этапы экстренной поддержки решения (hotfix)](#%d0%ad%d1%82%d0%b0%d0%bf%d1%8b-%d1%8d%d0%ba%d1%81%d1%82%d1%80%d0%b5%d0%bd%d0%bd%d0%be%d0%b9-%d0%bf%d0%be%d0%b4%d0%b4%d0%b5%d1%80%d0%b6%d0%ba%d0%b8-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f-hotfix)
    - [1. Разработка решения задачи](#1-%d0%a0%d0%b0%d0%b7%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%ba%d0%b0-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b7%d0%b0%d0%b4%d0%b0%d1%87%d0%b8)
    - [2. Review решения задачи](#2-review-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b7%d0%b0%d0%b4%d0%b0%d1%87%d0%b8)
    - [3. Выпуск hotfix](#3-%d0%92%d1%8b%d0%bf%d1%83%d1%81%d0%ba-hotfix)
    - [4. Стабилизация текущей ветки релиза](#4-%d0%a1%d1%82%d0%b0%d0%b1%d0%b8%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d1%82%d0%b5%d0%ba%d1%83%d1%89%d0%b5%d0%b9-%d0%b2%d0%b5%d1%82%d0%ba%d0%b8-%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%b0)
    - [5. Обновление тестового стенда](#5-%d0%9e%d0%b1%d0%bd%d0%be%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d1%82%d0%b5%d1%81%d1%82%d0%be%d0%b2%d0%be%d0%b3%d0%be-%d1%81%d1%82%d0%b5%d0%bd%d0%b4%d0%b0)
  - [Роли в процессе разработки](#%d0%a0%d0%be%d0%bb%d0%b8-%d0%b2-%d0%bf%d1%80%d0%be%d1%86%d0%b5%d1%81%d1%81%d0%b5-%d1%80%d0%b0%d0%b7%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%ba%d0%b8)
    - [Developer](#developer)
    - [Reviewer](#reviewer)
    - [Lead](#lead)
    - [Tester](#tester)
  - [Общий пример ветвления](#%d0%9e%d0%b1%d1%89%d0%b8%d0%b9-%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b2%d0%b5%d1%82%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d1%8f)
  - [Ветвь master](#%d0%92%d0%b5%d1%82%d0%b2%d1%8c-master)
  - [Ветви релизов](#%d0%92%d0%b5%d1%82%d0%b2%d0%b8-%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%be%d0%b2)
    - [Соглашение о именовании ветвей релизов](#%d0%a1%d0%be%d0%b3%d0%bb%d0%b0%d1%88%d0%b5%d0%bd%d0%b8%d0%b5-%d0%be-%d0%b8%d0%bc%d0%b5%d0%bd%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b8-%d0%b2%d0%b5%d1%82%d0%b2%d0%b5%d0%b9-%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%be%d0%b2)
  - [Ветви решений](#%d0%92%d0%b5%d1%82%d0%b2%d0%b8-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d0%b9)
    - [Соглашение о именовании ветвей решений](#%d0%a1%d0%be%d0%b3%d0%bb%d0%b0%d1%88%d0%b5%d0%bd%d0%b8%d0%b5-%d0%be-%d0%b8%d0%bc%d0%b5%d0%bd%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b8-%d0%b2%d0%b5%d1%82%d0%b2%d0%b5%d0%b9-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d0%b9)
    - [Описание подстановочных параметров](#%d0%9e%d0%bf%d0%b8%d1%81%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%b4%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%be%d1%87%d0%bd%d1%8b%d1%85-%d0%bf%d0%b0%d1%80%d0%b0%d0%bc%d0%b5%d1%82%d1%80%d0%be%d0%b2)
      - [TASK_TYPE](#tasktype)
      - [TASK_TRACKER](#tasktracker)
      - [TASK_NUMBER](#tasknumber)
      - [TASK_SHORT_NAME](#taskshortname)
  - [Стабилизация](#%d0%a1%d1%82%d0%b0%d0%b1%d0%b8%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f)
  - [Инструкции](#%d0%98%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%86%d0%b8%d0%b8)
    - [Инструкция работы Developer с ветвями feature и bugfix](#%d0%98%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%86%d0%b8%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-developer-%d1%81-%d0%b2%d0%b5%d1%82%d0%b2%d1%8f%d0%bc%d0%b8-feature-%d0%b8-bugfix)
      - [1. Создание ветки решения](#1-%d0%a1%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b2%d0%b5%d1%82%d0%ba%d0%b8-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f)
      - [2. Стабилизация от текущей ветки релиза](#2-%d0%a1%d1%82%d0%b0%d0%b1%d0%b8%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d0%be%d1%82-%d1%82%d0%b5%d0%ba%d1%83%d1%89%d0%b5%d0%b9-%d0%b2%d0%b5%d1%82%d0%ba%d0%b8-%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%b0)
      - [3. Разработка решения](#3-%d0%a0%d0%b0%d0%b7%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%ba%d0%b0-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f)
      - [4. Стабилизация от текущей ветки релиза](#4-%d0%a1%d1%82%d0%b0%d0%b1%d0%b8%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d0%be%d1%82-%d1%82%d0%b5%d0%ba%d1%83%d1%89%d0%b5%d0%b9-%d0%b2%d0%b5%d1%82%d0%ba%d0%b8-%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%b0)
      - [5. Отправка запроса на слияние с текущей ветвью релиза](#5-%d0%9e%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%ba%d0%b0-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0-%d0%bd%d0%b0-%d1%81%d0%bb%d0%b8%d1%8f%d0%bd%d0%b8%d0%b5-%d1%81-%d1%82%d0%b5%d0%ba%d1%83%d1%89%d0%b5%d0%b9-%d0%b2%d0%b5%d1%82%d0%b2%d1%8c%d1%8e-%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%b0)
    - [Инструкция работы Developer с ветвями hotfix](#%d0%98%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%86%d0%b8%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-developer-%d1%81-%d0%b2%d0%b5%d1%82%d0%b2%d1%8f%d0%bc%d0%b8-hotfix)
      - [1. Создание ветки решения](#1-%d0%a1%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b2%d0%b5%d1%82%d0%ba%d0%b8-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f-1)
      - [2. Разработка решения](#2-%d0%a0%d0%b0%d0%b7%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%ba%d0%b0-%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d1%8f)
      - [3. Стабилизация от текущей ветки релиза](#3-%d0%a1%d1%82%d0%b0%d0%b1%d0%b8%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d0%be%d1%82-%d1%82%d0%b5%d0%ba%d1%83%d1%89%d0%b5%d0%b9-%d0%b2%d0%b5%d1%82%d0%ba%d0%b8-%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%b0)
      - [4. Отправка запроса на слияние с ветвью master](#4-%d0%9e%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%ba%d0%b0-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0-%d0%bd%d0%b0-%d1%81%d0%bb%d0%b8%d1%8f%d0%bd%d0%b8%d0%b5-%d1%81-%d0%b2%d0%b5%d1%82%d0%b2%d1%8c%d1%8e-master)
    - [Инструкция работы Reviewer](#%d0%98%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%86%d0%b8%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-reviewer)
      - [1. Проверка кода](#1-%d0%9f%d1%80%d0%be%d0%b2%d0%b5%d1%80%d0%ba%d0%b0-%d0%ba%d0%be%d0%b4%d0%b0)
      - [2. Замечания](#2-%d0%97%d0%b0%d0%bc%d0%b5%d1%87%d0%b0%d0%bd%d0%b8%d1%8f)
      - [3. Подтверждение merge request](#3-%d0%9f%d0%be%d0%b4%d1%82%d0%b2%d0%b5%d1%80%d0%b6%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5-merge-request)
      - [4. Deploy на тест сервер](#4-deploy-%d0%bd%d0%b0-%d1%82%d0%b5%d1%81%d1%82-%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80)
    - [Инструкция работы Tester с ветвями feature и bug](#%d0%98%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%86%d0%b8%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-tester-%d1%81-%d0%b2%d0%b5%d1%82%d0%b2%d1%8f%d0%bc%d0%b8-feature-%d0%b8-bug)
    - [Инструкция работы Tester с ветвями release](#%d0%98%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%86%d0%b8%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-tester-%d1%81-%d0%b2%d0%b5%d1%82%d0%b2%d1%8f%d0%bc%d0%b8-release)
    - [Инструкция работы Lead с ветвями release](#%d0%98%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%86%d0%b8%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-lead-%d1%81-%d0%b2%d0%b5%d1%82%d0%b2%d1%8f%d0%bc%d0%b8-release)
      - [1. Отправка запроса на слияние с ветвью master](#1-%d0%9e%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%ba%d0%b0-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0-%d0%bd%d0%b0-%d1%81%d0%bb%d0%b8%d1%8f%d0%bd%d0%b8%d0%b5-%d1%81-%d0%b2%d0%b5%d1%82%d0%b2%d1%8c%d1%8e-master)
      - [2. Проверка кода](#2-%d0%9f%d1%80%d0%be%d0%b2%d0%b5%d1%80%d0%ba%d0%b0-%d0%ba%d0%be%d0%b4%d0%b0)
      - [3. Подтверждение merge request](#3-%d0%9f%d0%be%d0%b4%d1%82%d0%b2%d0%b5%d1%80%d0%b6%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5-merge-request-1)
      - [4. Deploy на production сервер](#4-deploy-%d0%bd%d0%b0-production-%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80)
      - [5. Smoke test](#5-smoke-test)
    - [Инструкция работы Lead с ветвями hotfix](#%d0%98%d0%bd%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%86%d0%b8%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-lead-%d1%81-%d0%b2%d0%b5%d1%82%d0%b2%d1%8f%d0%bc%d0%b8-hotfix)
      - [1. Проверка кода](#1-%d0%9f%d1%80%d0%be%d0%b2%d0%b5%d1%80%d0%ba%d0%b0-%d0%ba%d0%be%d0%b4%d0%b0-1)
      - [2. Замечания](#2-%d0%97%d0%b0%d0%bc%d0%b5%d1%87%d0%b0%d0%bd%d0%b8%d1%8f-1)
      - [3. Deploy на тестовый стенд](#3-deploy-%d0%bd%d0%b0-%d1%82%d0%b5%d1%81%d1%82%d0%be%d0%b2%d1%8b%d0%b9-%d1%81%d1%82%d0%b5%d0%bd%d0%b4)
      - [4. Воспроизведение сценария ошибки на тестовом стенде](#4-%d0%92%d0%be%d1%81%d0%bf%d1%80%d0%be%d0%b8%d0%b7%d0%b2%d0%b5%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5-%d1%81%d1%86%d0%b5%d0%bd%d0%b0%d1%80%d0%b8%d1%8f-%d0%be%d1%88%d0%b8%d0%b1%d0%ba%d0%b8-%d0%bd%d0%b0-%d1%82%d0%b5%d1%81%d1%82%d0%be%d0%b2%d0%be%d0%bc-%d1%81%d1%82%d0%b5%d0%bd%d0%b4%d0%b5)
      - [5. Deploy на production стенд](#5-deploy-%d0%bd%d0%b0-production-%d1%81%d1%82%d0%b5%d0%bd%d0%b4)
      - [6. Стабилизация текущей ветки релиза](#6-%d0%a1%d1%82%d0%b0%d0%b1%d0%b8%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d1%82%d0%b5%d0%ba%d1%83%d1%89%d0%b5%d0%b9-%d0%b2%d0%b5%d1%82%d0%ba%d0%b8-%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%b0)
      - [7. Проверка кода](#7-%d0%9f%d1%80%d0%be%d0%b2%d0%b5%d1%80%d0%ba%d0%b0-%d0%ba%d0%be%d0%b4%d0%b0)
      - [8. Подтверждение merge request](#8-%d0%9f%d0%be%d0%b4%d1%82%d0%b2%d0%b5%d1%80%d0%b6%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5-merge-request)
      - [9. Deploy на тест сервер](#9-deploy-%d0%bd%d0%b0-%d1%82%d0%b5%d1%81%d1%82-%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80)

## Описание

Данный документ описывает соглашение о процессе разработки кода продукта с использованием git репозитория.

Описываемый процесс призван уменьшить количество конфликтов при слияниях веток, определить обязанности и границы ответсвенности в команде разработки, создать единообразие в ведении репозиториев и уменьшить объём коммуникаций в команде разработки.

Описываемый процесс является достаточным для автоматизации процедуры деплоя на test и production среды.

Данный процесс является производным от процесса [GitFlow](https://habr.com/post/106912/).

## Этапы разработки (fix, feature)

### 1. Формирование перечня задач

На данном этапе формируется перечень задач, которые войду в релиз определенной версии. Задачи должны быть поставлены в task tracker и иметь уникальные номера.

Результатом данного этапа должна стать стабилизационная ветвь - релиза новой версии продукта отрощенная от ветки master. Работы проводятся ролью [Lead](#lead).

### 2. Разработка решения задачи

На данном этапе производится решение поставленной задачи в отдельной ветке решения задачи. Работы проводятся ролью [Developer](#developer).

После завершения работы над кодом обязательно проводится стабилизация ветки решения и после решения конфликтов создаётся запрос на слияние в системе управления репозиторием. Задача на слияние веток ставится на [Reviewer](#reviewer)

### 3. Review решения задачи

На данном этапе проводится проверка кода решения для выявления недочётов. С данного этапа возможно возвращение решения задачи на доработку. Работы проводятся ролью [Reviewer](#reviewer).

### 4. Слияние решений задачи

На данном этапе производится слияние ветви решения с ветвью релиза. Работы проводятся ролью [Reviewer](#reviewer).

### 5. Deploy тестового стенда

На данном этапе проводится деплой текущей ветки релиза на test стенд. В случае если разворот не успешен задача возвращается [Developer](#developer) на доработку. Работы проводятся ролью [Reviewer](#reviewer).

### 6. Заморозка

Данный этап начинается после того, как все задачи запланированные на релиз решены. На данном этапе запрещено добавлять в релиз новые [feature](#TASK_TYPE). Заморозку объявляет роль [Lead](#lead)

### 7. Тестирование

Этап проверки, что функционал продукта работает стабильно, все заявленные [feature](#TASK_TYPE) реализованы в соответсвии с постановкой задач, все [bugfix](#TASK_TYPE) исправлены и не пострадал основной функционал продукта.

### 8. Исправлени недочётов

При выявлении недочётов на этапе [тестирования](#Тестирование) проводится регистрация недочётов в системе task tracker и инициируется исправление проблем. Тестирование проводит роль [Tester](#Tester) на test стенде.

### 9. Релиз

На данном этапе проводится сляние ветки текущего релиза и ветки master. За тем производит деплой на production стенд. Работы проводятся ролью [Lead](#lead)

## Этапы экстренной поддержки решения (hotfix)

### 1. Разработка решения задачи

На данном этапе производится решение поставленной задачи в отдельной ветке решения задачи. Работы проводятся ролью [Developer](#developer).

### 2. Review решения задачи

На данном этапе проводится проверка кода решения для выявления недочётов. С данного этапа возможно возвращение решения задачи на доработку. Работы проводятся ролью [Lead](#lead).

### 3. Выпуск hotfix

На данном этапе проводится сляние ветви hotfix с ветвью master и последующий деплой на production стенд. Работы проводятся ролью [Lead](#lead).

### 4. Стабилизация текущей ветки релиза

На данном этапе проводится стабилизация текущей ветви релиза от ветви hotfix. Работы проводятся ролью [Lead](#lead).

### 5. Обновление тестового стенда

На данном этапе проводится деплой текущей ветки релиза на test стенд. Работы проводятся ролью [Lead](#lead).

## Роли в процессе разработки

В процессе работы с git выделяются роли с определённым набором ответсвенности относительно кодовой базы.

### Developer

Инженер разрабатывающий решение для задачи. Несёт ответственность за конечную реализацию решения задачи и полное соответсвие решения постановке задачи.

### Reviewer 

Инженер проводящий review кода. Несёт ответсвенность за качество проверяемого кода.

### Lead

Инженер принимающий решение о релизе продукта, несёт ответсвенность за кодовую базу продукта.

### Tester

Инженер проводящий тестирование решения, несёт отвественность за полное соответсвие решения постановке задачи(ДВОЙНАЯ ОТВЕТСВЕННОСТЬ).

## Общий пример ветвления

![RIT GitFlow](/img/process.png)

## Ветвь master

Основная ветвь продукта. Ветвь master содержит текущее состояние кода продукта и список изменений вносимых в продукт.

## Ветви релизов

Ветви предназначенные для стабилизации разрабатываемых решений задач и формирования перечня решений входящий в определенный релиз.

Ветвь релиза существует до тех пор пока не будет слита с ветвью master. После слияния в ветвь релиза запрещено вливать другие ветви. 

### Соглашение о именовании ветвей релизов

Формат названия ветки: release_[VERSION]

Пример названия ветки: release_1.2.3

## Ветви решений

Ветви предназначенные для хранения решений задач. Для каждой задачи создаётся отдельная ветвь.

Ветвь решения существует до тех пор пока не будет слита с ветвью текущего релиза. После слияния с ветвью релиза запрещено вносить изменения в ветвь решения. Все проблемы после слияния с ветвью текущего релиза должны фиксироваться в системе task tracker и быть исправлены в отдельных ветках.

### Соглашение о именовании ветвей решений

Формат названия ветки: [[TASK_TYPE]](#task_type)-[[TASK_TRACKER]](#task_tracker)-[[TASK_NUMBER]](#task_number)-[[TASK_SHORT_NAME]](#task_short_name)

Пример названия ветки: feature-YT-TA-71-add_building_selection_to_main_search

### Описание подстановочных параметров

#### TASK_TYPE

Тип задачи в системе task tracker. Может быть 3х типов:
* feature - новая функция или фича продукта
* bugfix - исправление некорректного поведения продукта
* hotfix - срочное исправление некорректного поведения продукта

#### TASK_TRACKER

Наименование системы task tracker, например Jira или YT 

#### TASK_NUMBER

Полный номер задачи из системы bug tracker, например TA-71 или DW-34

#### TASK_SHORT_NAME

Краткое название задачи отражающее суть задачи, например add_date_filter_to_main_search

## Стабилизация

Процесс слияния уже разработанных и прошедших review ветвей решений задач, ветви master или ветвей релизов с целевой ветвью.

Стабилизация проводится из обновленной(!) стабилизационной ветви в целевой ветке при помощи команды:

    git pull --all
    git merge --no-ff release_1.2.3

## Инструкции

### Инструкция работы [Developer](#developer) с ветвями feature и bugfix

#### 1. Создание ветки решения

    git pull --all
    git checkout -b feature-YT-TA-71-add_building_selection_to_main_search master

#### 2. Стабилизация от текущей ветки релиза
    
    git pull --all
    git merge --no-ff release_1.2.3

#### 3. Разработка решения

В процессе разработке используется исключительно добавление результатов в виде коммитов и отправка на головной сервер в ветку решения задачи

    git add .
    git commit -m "Commit text"
    git push -u origin feature-YT-TA-71-add_building_selection_to_main_search

При необходимости проводится стабилизация от ветки релиза

    git pull --all
    git merge --no-ff release_1.2.3

#### 4. Стабилизация от текущей ветки релиза

    git pull --all
    git merge --no-ff release_1.2.3
    git push -u origin feature-YT-TA-71-add_building_selection_to_main_search

#### 5. Отправка запроса на слияние с текущей ветвью релиза

Запрос на слияние ветви решения с текущей ветвью релиза отправляется в системе управления репозиторием инженеру с ролью [Reviewer](#reviewer).

### Инструкция работы [Developer](#developer) с ветвями hotfix

#### 1. Создание ветки решения

    git pull --all
    git checkout -b hotfix-YT-TA-80-incorrect_search_results master

#### 2. Разработка решения

В процессе разработке используется исключительно добавление результатов в виде коммитов и отправка на головной сервер в ветку решения задачи

    git add .
    git commit -m "Commit text"
    git push -u origin hotfix-YT-TA-80-incorrect_search_results

При необходимости проводится стабилизация от ветви master

    git pull --all
    git merge --no-ff master
    
#### 3. Стабилизация от текущей ветки релиза

    git pull --all
    git merge --no-ff master
    git push -u origin hotfix-YT-TA-80-incorrect_search_results

#### 4. Отправка запроса на слияние с ветвью master

Запрос на слияние ветви решения с ветвью master отправляется в системе управления репозиторием инженеру с ролью [Lead](#lead).

### Инструкция работы [Reviewer](#reviewer)

#### 1. Проверка кода

На данном этапе проводится проверка кода на соответствие общепринятым стандартам стилистики и проверка алгоритмов решения. 

#### 2. Замечания

В случае выявления замечаний, замечания вносятся в виде комментариев к merge request в системе управления git и merge request отклоняется.

#### 3. Подтверждение merge request

В случае если код не имеет замечаний merge request подтверждается. подтверждение производится в системе git репозитория.

#### 4. Deploy на тест сервер

Инженер с ролью [Reviewer](#reviewer) производит сборку проекта и Deploy новой версии на тестовый стенд для дальнейшего тестирования.

### Инструкция работы [Tester](#Tester) с ветвями feature и bug

По подготовленным тестовым сценариям для функционала производит тестирование. В случае если найдены ошибки передаёт их разработчику для исправления.

### Инструкция работы [Tester](#Tester) с ветвями release

при заморозке рилиза производит регрессионное тестирование функционала по всем тестовым сценариям. В случае выявления ошибок регестрирует их как задачи типа bug и вносит в текущий релиз.

### Инструкция работы [Lead](#lead) с ветвями release

#### 1. Отправка запроса на слияние с ветвью master

Изнженер с ролью [Lead](#lead) отправляет запрос на слияние (merge request) ветви release с ветвью master в системе управления репозиторием инженеру с ролью [Lead](#lead).

#### 2. Проверка кода

Инженер производит проверку на предмет корректности слияния и отсутствия конфликтов между ветвями. В случае если ветви имеют конфликты инженер устраняет их в ветви release.

#### 3. Подтверждение merge request

Инженер подтверждает merge request

#### 4. Deploy на production сервер

Инженер производит Deploy ветки master на production сервер проекта

#### 5. Smoke test

Инженер производит тестирование базовых функциональностей продукта и в случае отказа производит откат до прошлой версии ветви master

### Инструкция работы [Lead](#lead) с ветвями hotfix 

#### 1. Проверка кода

На данном этапе проводится проверка кода на соответствие общепринятым стандартам стилистики и проверка алгоритмов решения.

#### 2. Замечания

В случае выявления замечаний, замечания вносятся в виде комментариев к merge request в системе управления git и merge request отклоняется.

#### 3. Deploy на тестовый стенд

Инженер производит Deploy ветки hotfix на тестовом стенде.

#### 4. Воспроизведение сценария ошибки на тестовом стенде

Инженер воспроизводит сценарий отказа системы и проверяет исправлена ли проблема. В случае если проблема исправлена подтверждает merge request. В случае если проблема не исправлена отклоняет merge request.

#### 5. Deploy на production стенд

Инженер производит Deploy на production стенд ветки master. 

#### 6. Стабилизация текущей ветки релиза

Изнженер с ролью [Lead](#lead) отправляет запрос на слияние (merge request) ветви hotfix с ветвью release в системе управления репозиторием инженеру с ролью [Lead](#lead).

#### 7. Проверка кода

Инженер производит проверку на предмет корректности слияния и отсутствия конфликтов между ветвями. В случае если ветви имеют конфликты инженер устраняет их в ветви release.

#### 8. Подтверждение merge request

Инженер подтверждает merge request

#### 9. Deploy на тест сервер

Инженер производит сборку проекта и Deploy новой версии на тестовый стенд.
